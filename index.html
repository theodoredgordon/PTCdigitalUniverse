<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PTC Universe — Marketing (Speed + Tooltips)</title>
<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600;800&display=swap" rel="stylesheet" />
<style>
:root{ --ptc-green:#5BB73B; --ptc-gray:#3D4647; --ptc-orange:#F38800; --ptc-blue:#00ACC8;
  --ptc-darkblue:#236192; --ptc-yellow:#F1B434; --ptc-coolgray:#C8C9C7;
  --eco-plm: var(--ptc-green); --eco-design: var(--ptc-blue); --eco-alm: var(--ptc-yellow);
  --eco-iot: var(--ptc-blue); --eco-slm: var(--ptc-orange); --eco-ar: var(--ptc-darkblue);
  --bg:#0b0f16; --white:#eef4fb; --muted:#b9c8d8; --teal:#00f6d1; }
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:'Raleway', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;color:var(--white);
  background:
    radial-gradient(1200px 700px at 50% 48%, rgba(26,42,63,.60), transparent 70%),
    radial-gradient(1800px 1000px at 50% 50%, rgba(26,42,63,.65), transparent 75%),
    radial-gradient(2800px 1400px at 50% 60%, rgba(16,24,38,.9), rgba(11,15,22,1) 70%),
    var(--bg);
  overflow:hidden;}
svg{position:fixed;inset:0;width:100vw;height:100vh}
#hud{position:fixed;left:20px;top:18px;z-index:5}
#hud h1{margin:0;font-weight:800;letter-spacing:.3px;text-shadow:0 2px 16px rgba(0,0,0,.35)}
#hud h2{margin:6px 0 0 0;font-weight:600;font-size:14px;color:var(--muted)}
.panel{position:fixed;right:18px;top:18px;max-width:440px;background:rgba(16,24,38,.78);
  border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px 16px;backdrop-filter: blur(8px);z-index:5}
.panel h3{margin:0 0 8px 0;font-weight:700;font-size:16px}
.panel p{margin:0 0 10px 0;font-size:13px;color:var(--muted);line-height:1.5}
.legend{display:grid;grid-template-columns:16px 1fr;gap:8px 10px;font-size:13px;margin-top:8px}
.dot{width:14px;height:14px;border-radius:50%}
.hr{height:1px;background:linear-gradient(90deg, transparent, rgba(255,255,255,.14), transparent);margin:10px 0}
.inLabel{
  font-weight:800;
  text-anchor:middle;
  font-size:15px;
  pointer-events:none;
  fill:#fff;
  dominant-baseline:middle;
  text-shadow:0 2px 8px #222;
}
.node{cursor:pointer;transition:transform .35s ease}
.node:hover{transform:scale(1.04)}
.link{stroke:var(--teal);stroke-width:2;opacity:.35;pointer-events:none}
.link2{stroke:var(--teal);stroke-width:6;opacity:.06;filter:blur(1.5px);pointer-events:none}
.glow{animation:pulse 4s ease-in-out infinite;opacity:.95;mix-blend-mode:screen;pointer-events:none}
@keyframes pulse{0%{filter:blur(18px) opacity(.7)}50%{filter:blur(28px) opacity(1)}100%{filter:blur(18px) opacity(.7)}}
.tooltip{position:fixed;pointer-events:none;z-index:9999;background:linear-gradient(180deg, rgba(18,26,38,.96), rgba(12,18,27,.96));
  border:1px solid rgba(255,255,255,.08);padding:14px 18px;border-radius:12px;font-size:15px;color:#e7f6f2;line-height:1.5;max-width:420px;
  box-shadow:0 8px 28px rgba(0,0,0,.35);transform:translate(-50%,-120%);transition:opacity .18s ease, transform .18s ease;opacity:0;
  font-size:15px;}
.tooltip b{font-weight:900;color:#ccf7ea;font-size:17px;}
.controls{position:fixed;left:18px;bottom:18px;display:flex;gap:8px;z-index:6;align-items:center;background:rgba(16,24,38,.7);
  padding:8px 10px;border-radius:12px;border:1px solid rgba(255,255,255,.08);backdrop-filter: blur(6px)}
button{background:#141f31;color:#cfe5ff;border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:8px 10px;cursor:pointer;transition:background .2s ease}
button:hover{background:#1a2942}
.range{display:flex;align-items:center;gap:8px}
.range input{accent-color:#20dfb8}
.range label{font-size:12px;color:var(--muted)}
@media (prefers-reduced-motion: reduce){.glow{animation:none}.pulsePath{animation:none}}
</style>
</head>
<body>
<div id="hud">
  <h1>PTC Universe / Multiverse</h1>
  <h2>Digital Thread Nexus & Ecosystems</h2>
</div>
<div class="panel" aria-label="PTC Universe Legend">
  <h3>Digital Thread Nexus</h3>
  <p>The gravitational hub connecting design, manufacturing, service, and quality with closed-loop data flow.</p>
  <div class="hr"></div>
  <h3>Core Domains</h3>
  <div class="legend">
    <div class="dot" style="background:var(--eco-plm)"></div><div><strong>PLM</strong> — Windchill, Onshape, Arena</div>
    <div class="dot" style="background:var(--eco-design)"></div><div><strong>Design</strong> — Creo</div>
    <div class="dot" style="background:var(--eco-alm)"></div><div><strong>ALM</strong> — Codebeamer</div>
    <div class="dot" style="background:var(--eco-iot)"></div><div><strong>IoT</strong> — ThingWorx, Kepware</div>
    <div class="dot" style="background:var(--eco-slm)"></div><div><strong>SLM</strong> — ServiceMax, Arbortext</div>
    <div class="dot" style="background:var(--eco-ar)"></div><div><strong>AR</strong> — Vuforia</div>
  </div>
</div>

<div class="tooltip" id="tip" role="tooltip" aria-hidden="true"></div>

<svg id="scene" viewBox="0 0 1920 1080">
  <defs>
    <filter id="softGlow">
      <feGaussianBlur stdDeviation="8" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <radialGradient id="centerGlow"><stop offset="0%" stop-color="#cfe7ff" stop-opacity=".10"/><stop offset="45%" stop-color="#6ec7ff" stop-opacity=".06"/><stop offset="100%" stop-color="#001018" stop-opacity="0"/></radialGradient>
    <radialGradient id="halo" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#00f6d1" stop-opacity="0.25"/>
      <stop offset="100%" stop-color="#00f6d1" stop-opacity="0"/>
    </radialGradient>
  </defs>
  <rect x="0" y="0" width="100%" height="100%" fill="url(#centerGlow)"></rect>
  <g id="links"></g>
  <g id="halos"></g>
  <g id="nodes"></g>
</svg>

<div class="controls">
  <button data-period="30">30s orbit</button>
  <button data-period="45">45s orbit</button>
  <button data-period="60">60s orbit</button>
  <button id="reduceMotionBtn">Pause</button>
  <div class="range">
    <label for="period">Custom:</label>
    <input id="period" type="range" min="15" max="120" step="1" value="45" />
    <span id="pLabel">45s</span>
  </div>
</div>

<script>
const css = getComputedStyle(document.documentElement);
const W=1920, H=1080; const CENTER=[W/2,H/2];
function color(name){ return css.getPropertyValue(name).trim(); }

// URL param support: ?period=45
const qs = new URLSearchParams(location.search);
let ORBIT_PERIOD = parseFloat(qs.get('period')||'45'); // seconds for a full 360° orbit
if(isNaN(ORBIT_PERIOD) || ORBIT_PERIOD<=0) ORBIT_PERIOD = 45;

let reducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
function applyReducedMotionState(){
  document.body.classList.toggle('reduced-motion', reducedMotion);
  const btn = document.getElementById('reduceMotionBtn');
  if(btn) btn.textContent = reducedMotion ? 'Resume' : 'Pause';
}

const copy={
  'Digital Thread Nexus':'Closed-loop flow connecting the digital and physical across the lifecycle (PLM at the core).',
  'Windchill':'PLM backbone for BOMs, configurations, and change — enterprise traceability.',
  'Arena':'Cloud PLM/QMS that accelerates collaboration and compliance for fast-moving teams.',
  'Onshape':'Cloud-native CAD with real‑time collaboration and built‑in data management.',
  'Creo':'Advanced CAD authoring; simulation-ready models and MBD/MFG continuity.',
  'ThingWorx':'Industrial IoT apps to operationalize asset data and feed the digital thread.',
  'Kepware':'Industrial connectivity — bridging OT data to IT/IoT platforms securely.',
  'ServiceMax':'Service execution system of record; closes the loop from field to engineering.',
  'Arbortext':'Technical content creation and delivery tied to product configurations.',
  'Codebeamer':'Requirements, risk, and test management — end‑to‑end traceability with PLM.',
  'Vuforia':'AR work instructions and training that reuse upstream product data.'
};

const baseNodes=[
  {name:'Digital Thread Nexus', r:0, ang:-90, size:160, color:color('--eco-plm'), mult:0},
  {name:'Windchill', r:340, ang:-10, size:90, color:color('--eco-plm'), mult:1},
  {name:'Arena', r:380, ang:30, size:64, color:color('--eco-plm'), mult:1.5},
  {name:'Onshape', r:370, ang:75, size:62, color:color('--eco-plm'), mult:2},
  {name:'Creo', r:420, ang:135, size:76, color:color('--eco-design'), mult:1},
  {name:'ThingWorx', r:380, ang:200, size:86, color:color('--eco-iot'), mult:1.2},
  {name:'Kepware', r:430, ang:235, size:60, color:color('--eco-iot'), mult:1.8},
  {name:'ServiceMax', r:370, ang:300, size:86, color:color('--eco-slm'), mult:1.2},
  {name:'Arbortext', r:410, ang:330, size:60, color:color('--eco-slm'), mult:1.7},
  {name:'Codebeamer', r:280, ang:260, size:78, color:color('--eco-alm'), mult:1.1},
  {name:'Vuforia', r:450, ang:20, size:70, color:color('--eco-ar'), mult:0.9}
];

const edges=[
  ['Windchill','ServiceMax'],['Windchill','ThingWorx'],['Windchill','Codebeamer'],['Windchill','Creo'],['Windchill','Vuforia'],
  ['ThingWorx','ServiceMax'],['ThingWorx','Vuforia'],['Codebeamer','Onshape'],['Codebeamer','Arena'],['Arbortext','ServiceMax'],
  ['Kepware','ThingWorx'],['Creo','Onshape']
];

const svg=document.getElementById('scene');
const gLinks=document.getElementById('links');
const gHalos=document.getElementById('halos');
const gNodes=document.getElementById('nodes');
const tip=document.getElementById('tip');

function omega(){ return (2*Math.PI)/ORBIT_PERIOD; }

let nodes = baseNodes.map(n=>Object.assign({}, n, {baseAngRad: (n.ang||0)*(Math.PI/180), x:0, y:0}));
const nodeByName = new Map();

function createElements(){
  gNodes.innerHTML = '';
  gLinks.innerHTML = '';
  gHalos.innerHTML = '';
  nodes.forEach(n=>{
    const g = document.createElementNS('http://www.w3.org/2000/svg','g');
    g.classList.add('node');
    g.setAttribute('data-name', n.name);
    const circle = document.createElementNS('http://www.w3.org/2000/svg','circle');
    circle.setAttribute('r', n.size/2);
    circle.setAttribute('fill', n.color);
    circle.setAttribute('filter', 'url(#softGlow)');
    g.appendChild(circle);

    // Better: label centered in circle, bold, always visible
    const text = document.createElementNS('http://www.w3.org/2000/svg','text');
    text.classList.add('inLabel');
    text.setAttribute('x', 0);
    text.setAttribute('y', 5); // vertical centering tweak
    text.setAttribute('text-anchor','middle');
    text.textContent = n.name;
    g.appendChild(text);

    gNodes.appendChild(g);
    nodeByName.set(n.name, {g, circle, text});
  });

  edges.forEach(e=>{
    const from = nodes.find(n=>n.name===e[0]);
    const to = nodes.find(n=>n.name===e[1]);
    if(!from||!to) return;
    const path = document.createElementNS('http://www.w3.org/2000/svg','path');
    path.classList.add('link');
    path.setAttribute('fill','none');
    gLinks.appendChild(path);
  });
}

function updateLinkAnimationsDuration(){}

function positionNodes(t){
  const w = CENTER[0], h = CENTER[1];
  const om = reducedMotion ? 0 : omega();
  for(const n of nodes){
    if(n.r===0){ n.x = w; n.y = h; continue; }
    const ang = n.baseAngRad + om * n.mult * t;
    n.x = w + Math.cos(ang)*n.r;
    n.y = h + Math.sin(ang)*n.r;
  }
}

function updateElements(){
  nodes.forEach(n=>{
    const entry = nodeByName.get(n.name);
    if(!entry) return;
    entry.g.setAttribute('transform', `translate(${n.x},${n.y})`);
    entry.text.setAttribute('x', 0);
    entry.text.setAttribute('y', 5); // keep vertical centering
  });

  const paths = gLinks.querySelectorAll('path');
  let i=0;
  edges.forEach(e=>{
    const from = nodes.find(n=>n.name===e[0]);
    const to = nodes.find(n=>n.name===e[1]);
    if(!from||!to) return;
    const d = `M ${from.x} ${from.y} L ${to.x} ${to.y}`;
    if(paths[i]) paths[i].setAttribute('d', d);
    i++;
  });
}

const style = document.createElement('style');
style.textContent = `@keyframes dash{0%{stroke-dasharray:0 600;stroke-opacity:.25} 40%{stroke-dasharray:120 600;stroke-opacity:.45} 100%{stroke-dasharray:600 600;stroke-opacity:.20}}`;
document.head.appendChild(style);

createElements();
updateLinkAnimationsDuration();
applyReducedMotionState();

let start = performance.now();
let tipVisible = false;
let lastPointer = {x:0,y:0};
function frame(now){
  const t = (now - start)/1000;
  positionNodes(t); updateElements();

  if(tipVisible){
    tip.style.left = lastPointer.x + 'px';
    tip.style.top  = lastPointer.y + 'px';
  }

  requestAnimationFrame(frame);
}
requestAnimationFrame(frame);

document.querySelectorAll('button[data-period]').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    ORBIT_PERIOD = parseFloat(btn.dataset.period);
    document.getElementById('period').value = ORBIT_PERIOD;
    document.getElementById('pLabel').textContent = ORBIT_PERIOD+'s';
    updateLinkAnimationsDuration();
  });
});
const slider = document.getElementById('period');
slider.value = ORBIT_PERIOD;
document.getElementById('pLabel').textContent = ORBIT_PERIOD+'s';
slider.addEventListener('input', ()=>{
  ORBIT_PERIOD = parseFloat(slider.value);
  document.getElementById('pLabel').textContent = ORBIT_PERIOD+'s';
  updateLinkAnimationsDuration();
});

const reduceBtn = document.getElementById('reduceMotionBtn');
if(reduceBtn){
  reduceBtn.addEventListener('click', ()=>{
    reducedMotion = !reducedMotion;
    applyReducedMotionState();
  });
}

// TOOLTIP: offset, readable, stays until pointer leaves node
gNodes.addEventListener('mousemove', (ev)=>{
  const node = ev.target.closest && ev.target.closest('g.node');
  if(!node){ tip.style.opacity = 0; tipVisible = false; return; }
  const name = node.getAttribute('data-name') || node.querySelector('text')?.textContent;
  if(!name) { tip.style.opacity = 0; tipVisible = false; return; }
  const desc = copy[name] || name;
  tip.innerHTML = `<b>${name}</b><br/><span>${desc}</span>`;
  tip.style.opacity = 1;
  lastPointer.x = ev.clientX + 22;
  lastPointer.y = ev.clientY + 28;
  tipVisible = true;
});
gNodes.addEventListener('mouseleave', ()=>{ tip.style.opacity = 0; tipVisible = false; });

gNodes.addEventListener('focusin', (ev)=>{
  const node = ev.target.closest && ev.target.closest('g.node');
  if(!node) return;
  const name = node.getAttribute('data-name') || node.querySelector('text')?.textContent;
  tip.innerHTML = `<b>${name}</b><br/>${copy[name]||name}`;
  tip.style.opacity = 1; tipVisible=true; lastPointer.x = window.innerWidth/2; lastPointer.y = window.innerHeight/2;
  tip.style.left = `${lastPointer.x}px`;
  tip.style.top = `${lastPointer.y}px`;
});
gNodes.addEventListener('focusout', ()=>{ tip.style.opacity = 0; tipVisible=false; });

</script>
</body>
</html>
